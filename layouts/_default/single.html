{{ define "main" }}

<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": ["Product", "Recipe"],
  "name": "{{ .Title }}",
  "description": "{{ .Params.description }}",
  "sku": "{{ .Params.sku }}",
  "image": "{{ .Params.image | absURL }}",
  "brand": { "@type": "Brand", "name": "ChefBrico" },
  "author": { "@type": "Person", "name": "{{ .Site.Params.author }}" },
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "recipeCategory": "{{ .Params.category }}",
  "nutrition": {
    "@type": "NutritionInformation",
    "calories": "{{ .Params.nutrition.calories }} kcal",
    "proteinContent": "{{ .Params.nutrition.protein }} g",
    "carbohydrateContent": "{{ .Params.nutrition.carbs }} g"
  },
  "offers": {
    "@type": "Offer",
    "price": "{{ .Params.price }}",
    "priceCurrency": "BRL",
    "availability": "https://schema.org/InStock",
    "seller": { "@type": "Organization", "name": "ChefBrico" },
    "description": "Oferta ChefBox: Monte um kit com 5 sabores. Voc√™ paga 4 e ganha o 5¬∫ de presente."
  }
}
</script>

<style>
  .receita-header { text-align: center; max-width: 800px; margin: 40px auto; padding: 0 20px; }
  .receita-title { color: #014039; font-size: 2.2rem; font-family: serif; margin-bottom: 10px; line-height: 1.2; }
  .receita-subtitle { color: #666; font-style: italic; font-size: 1.1rem; }
  
  .meta-bar { display: flex; justify-content: center; gap: 15px; margin: 25px 0; flex-wrap: wrap; }
  .meta-item { display: flex; align-items: center; gap: 6px; background: #fff; padding: 8px 15px; border-radius: 20px; border: 1px solid #eee; font-size: 0.85rem; font-weight: 600; }
  
  .hero-image-container { max-width: 900px; margin: 0 auto 40px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
  .hero-image-container img { width: 100%; height: auto; display: block; }
  
  .conteudo-leitura { max-width: 740px; margin: 0 auto; line-height: 1.8; color: #333; font-size: 1.1rem; padding: 0 20px; }
  .conteudo-leitura h2 { color: #014039; margin-top: 40px; font-size: 1.5rem; }
  
  /* CTA BOX */
  .cta-box { background: linear-gradient(90deg, #fdfbf7 0%, #fff 100%); border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px; margin: 60px auto; max-width: 700px; display: flex; align-items: center; gap: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
  .cta-img { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; }
  .btn-comprar-agora { background: #F2811D; color: white; padding: 12px 25px; border-radius: 30px; font-weight: bold; border: none; cursor: pointer; transition: transform 0.2s; }
  .btn-comprar-agora:hover { transform: scale(1.05); }

  /* NUTRI GRID */
  .nutri-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 30px; }
  .nutri-card { background: #fff; border: 1px solid #eee; border-radius: 8px; width: 90px; text-align: center; overflow: hidden; }
  .nutri-head { background: #014039; color: white; font-size: 0.65rem; padding: 4px; text-transform: uppercase; font-weight: bold; }
  .nutri-body { padding: 8px 0; font-weight: 800; color: #014039; }
  .nutri-unit { font-size: 0.7rem; color: #777; font-weight: normal; display: block; }
</style>

<article>
    <header class="receita-header">
        <h1 class="receita-title">{{ .Title }}</h1>
        <p class="receita-subtitle">{{ .Params.description }}</p>
        
        <div class="meta-bar">
            <div class="meta-item">‚è±Ô∏è {{ .Params.tempo_preparo | default "Pronto" }}</div>
            <div class="meta-item">üçΩÔ∏è {{ .Params.rendimento | default "1 Pessoa" }}</div>
            <div class="meta-item" style="background-color: #e8f5e9; color: #2e7d32;">‚ö° {{ .Params.nutrition.calories }} kcal</div>
        </div>
    </header>

    <div class="hero-image-container">
        <img src="{{ .Params.image | absURL }}" alt="Foto do prato {{ .Title }}">
    </div>

    <div class="conteudo-leitura">
        {{ .Content }}

        <div class="cta-box">
            <img src="{{ .Params.image | absURL }}" class="cta-img" alt="Miniatura">
            <div style="flex-grow: 1;">
                <h3 class="text-lg font-bold text-green-900">Gostou?</h3>
                <p class="text-sm text-gray-600">Adicione √† sua ChefBox agora.</p>
            </div>
            <button onclick="addToGame('{{ .Title }}', {{ .Params.price }}, '{{ .Params.image | absURL }}', '{{ .Params.sku }}')" 
                    class="btn-comprar-agora">
                + Adicionar (R$ {{ .Params.price }})
            </button>
        </div>

        {{ with .Params.nutrition }}
        <div style="text-align: center; margin-top: 60px; border-top: 1px solid #eee; padding-top: 40px;">
            <h3 style="color: #014039; margin-bottom: 10px;">Informa√ß√£o Nutricional</h3>
            <div class="nutri-grid">
                <div class="nutri-card"><div class="nutri-head">Calorias</div><div class="nutri-body">{{ .calories }}<span class="nutri-unit">kcal</span></div></div>
                <div class="nutri-card"><div class="nutri-head">Carbos</div><div class="nutri-body">{{ .carbs }}<span class="nutri-unit">g</span></div></div>
                <div class="nutri-card"><div class="nutri-head">Prote√≠na</div><div class="nutri-body">{{ .protein }}<span class="nutri-unit">g</span></div></div>
                <div class="nutri-card"><div class="nutri-head">Gordura</div><div class="nutri-body">{{ .fats }}<span class="nutri-unit">g</span></div></div>
            </div>
        </div>
        {{ end }}
        
    </div>
</article>

{{ end }}
